<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>–†–æ–±–æ—Ç –ö–æ–Ω—Ç—Ä–æ–ª—å</title>
    <style>
        body { background: #000; color: #0ff; font-family: monospace; padding: 20px; }
        #chat { height: 300px; border: 1px solid #0ff; overflow-y: auto; padding: 10px; margin-bottom: 10px; }
        .msg { margin: 5px 0; }
        .user { color: #fff; }
        .bot { color: #0f0; }
        .error { color: #f00; }
    </style>
</head>
<body>
    <h1>ü§ñ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–æ–±–æ—Ç–æ–º</h1>
    
    <div id="chat"></div>
    
    <div>
        <button onclick="send('–≤–ø–µ—Ä–µ–¥')">‚Üë –í–ø–µ—Ä–µ–¥</button>
        <button onclick="send('–Ω–∞–∑–∞–¥')">‚Üì –ù–∞–∑–∞–¥</button>
        <button onclick="send('–≤–ª–µ–≤–æ')">‚Üê –í–ª–µ–≤–æ</button>
        <button onclick="send('–≤–ø—Ä–∞–≤–æ')">‚Üí –í–ø—Ä–∞–≤–æ</button>
        <button onclick="send('—Å—Ç–æ–ø')">‚èπ –°—Ç–æ–ø</button>
    </div>
    
    <div style="margin-top: 10px;">
        <input type="text" id="cmd" placeholder="–ö–æ–º–∞–Ω–¥–∞">
        <button onclick="sendCustom()">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
    </div>

    <script>
        const chat = document.getElementById('chat');
        const cmdInput = document.getElementById('cmd');
        
        // –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
        const BOT_TOKEN = "7208925888:AAEMIL5YKKlKw_xQSZoRB9gabaAvm2T0weQ";
        const CHAT_ID = "-5063173925";
        
        function log(msg, type = 'user') {
            const div = document.createElement('div');
            div.className = `msg ${type}`;
            div.textContent = msg;
            chat.appendChild(div);
            chat.scrollTop = chat.scrollHeight;
        }
        
        // –í–∞—Ä–∏–∞–Ω—Ç 1: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å JSONP
        function sendJSONP(command) {
            return new Promise((resolve, reject) => {
                // Telegram –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç JSONP, –Ω–æ –º—ã –º–æ–∂–µ–º –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å
                const script = document.createElement('script');
                const callbackName = 'tg_callback_' + Date.now();
                
                window[callbackName] = function(data) {
                    delete window[callbackName];
                    document.body.removeChild(script);
                    resolve(data);
                };
                
                const url = `https://api.telegram.org/bot${BOT_TOKEN}/sendMessage?chat_id=${CHAT_ID}&text=${encodeURIComponent(command)}&callback=${callbackName}`;
                script.src = url;
                script.onerror = reject;
                document.body.appendChild(script);
            });
        }
        
        // –í–∞—Ä–∏–∞–Ω—Ç 2: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å CORS –ø—Ä–æ–∫—Å–∏
        async function sendViaProxy(command) {
            try {
                // –ò—Å–ø–æ–ª—å–∑—É–µ–º –ø—É–±–ª–∏—á–Ω—ã–π CORS –ø—Ä–æ–∫—Å–∏
                const proxyUrl = 'https://cors-anywhere.herokuapp.com/';
                const telegramUrl = `https://api.telegram.org/bot${BOT_TOKEN}/sendMessage`;
                
                const response = await fetch(proxyUrl + telegramUrl, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        chat_id: CHAT_ID,
                        text: command
                    })
                });
                
                if (response.ok) {
                    return await response.json();
                } else {
                    throw new Error('–û—à–∏–±–∫–∞ –ø—Ä–æ–∫—Å–∏');
                }
            } catch (error) {
                console.error('Proxy error:', error);
                throw error;
            }
        }
        
        // –í–∞—Ä–∏–∞–Ω—Ç 3: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å img —Ç–µ–≥ (GET –∑–∞–ø—Ä–æ—Å)
        function sendViaImg(command) {
            return new Promise((resolve) => {
                const img = new Image();
                img.style.display = 'none';
                
                const url = `https://api.telegram.org/bot${BOT_TOKEN}/sendMessage?chat_id=${CHAT_ID}&text=${encodeURIComponent(command)}`;
                img.src = url;
                
                img.onload = function() {
                    log(`‚úÖ –ö–æ–º–∞–Ω–¥–∞ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞: ${command}`, 'bot');
                    resolve(true);
                };
                
                img.onerror = function() {
                    log(`‚ùå –û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏: ${command}`, 'error');
                    resolve(false);
                };
                
                document.body.appendChild(img);
            });
        }
        
        // –í–∞—Ä–∏–∞–Ω—Ç 4: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ñ–æ—Ä–º—É (—Å–∞–º—ã–π —Å—Ç–∞—Ä—ã–π –º–µ—Ç–æ–¥)
        function sendViaForm(command) {
            const form = document.createElement('form');
            form.method = 'POST';
            form.action = `https://api.telegram.org/bot${BOT_TOKEN}/sendMessage`;
            form.target = '_blank';
            form.style.display = 'none';
            
            const chatIdInput = document.createElement('input');
            chatIdInput.type = 'hidden';
            chatIdInput.name = 'chat_id';
            chatIdInput.value = CHAT_ID;
            
            const textInput = document.createElement('input');
            textInput.type = 'hidden';
            textInput.name = 'text';
            textInput.value = command;
            
            form.appendChild(chatIdInput);
            form.appendChild(textInput);
            document.body.appendChild(form);
            
            form.submit();
            document.body.removeChild(form);
            
            return true;
        }
        
        async function send(command) {
            log(`–í—ã: ${command}`, 'user');
            
            try {
                // –ü—Ä–æ–±—É–µ–º –≤—Å–µ –º–µ—Ç–æ–¥—ã –ø–æ –æ—á–µ—Ä–µ–¥–∏
                let success = false;
                
                // –ú–µ—Ç–æ–¥ 1: IMG —Ç–µ–≥
                log(`–ü–æ–ø—ã—Ç–∫–∞ 1: –û—Ç–ø—Ä–∞–≤–∫–∞ —á–µ—Ä–µ–∑ IMG...`, 'bot');
                success = await sendViaImg(command);
                
                if (!success) {
                    // –ú–µ—Ç–æ–¥ 2: –§–æ—Ä–º–∞
                    log(`–ü–æ–ø—ã—Ç–∫–∞ 2: –û—Ç–ø—Ä–∞–≤–∫–∞ —á–µ—Ä–µ–∑ —Ñ–æ—Ä–º—É...`, 'bot');
                    success = sendViaForm(command);
                }
                
                if (!success) {
                    // –ú–µ—Ç–æ–¥ 3: Proxy
                    try {
                        log(`–ü–æ–ø—ã—Ç–∫–∞ 3: –û—Ç–ø—Ä–∞–≤–∫–∞ —á–µ—Ä–µ–∑ –ø—Ä–æ–∫—Å–∏...`, 'bot');
                        await sendViaProxy(command);
                        success = true;
                    } catch (e) {
                        log(`–ü—Ä–æ–∫—Å–∏ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç: ${e.message}`, 'error');
                    }
                }
                
                if (success) {
                    log(`‚úÖ –ö–æ–º–∞–Ω–¥–∞ "${command}" –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞ –≤ Telegram`, 'bot');
                } else {
                    log(`‚ùå –ù–µ —É–¥–∞–ª–æ—Å—å –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –∫–æ–º–∞–Ω–¥—É`, 'error');
                }
                
            } catch (error) {
                log(`‚ùå –û—à–∏–±–∫–∞: ${error.message}`, 'error');
            }
        }
        
        function sendCustom() {
            const cmd = cmdInput.value.trim();
            if (cmd) {
                send(cmd);
                cmdInput.value = '';
            }
        }
        
        // Enter –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏
        cmdInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') sendCustom();
        });
        
        // –°—Ç–∞—Ä—Ç–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
        log('–°–∏—Å—Ç–µ–º–∞ –∑–∞–ø—É—â–µ–Ω–∞. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–Ω–æ–ø–∫–∏ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è.', 'bot');
        log('–ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —Å Telegram...', 'bot');
        
        // –¢–µ—Å—Ç–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        setTimeout(() => {
            send('—Ç–µ—Å—Ç');
        }, 1000);
    </script>
</body>
</html>
